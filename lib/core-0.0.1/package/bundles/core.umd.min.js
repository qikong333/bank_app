!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common/http"),require("@ionic/angular"),require("@ionic/storage")):"function"==typeof define&&define.amd?define("core",["exports","@angular/core","@angular/common/http","@ionic/angular","@ionic/storage"],e):e(t.core={},t.ng.core,t.ng.common.http,null,null)}(this,function(t,e,r,n,o){"use strict";var i=function(){function t(){}return t.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[]},t.ngInjectableDef=e.defineInjectable({factory:function(){return new t},token:t,providedIn:"root"}),t}(),s=function(){function t(){}return t.prototype.ngOnInit=function(){},t.decorators=[{type:e.Component,args:[{selector:"lib-core",template:"\n    <p>\n      core works!\n    </p>\n  ",styles:[]}]}],t.ctorParameters=function(){return[]},t}(),a=function(){function t(){}return t.decorators=[{type:e.NgModule,args:[{imports:[],declarations:[s],exports:[s]}]}],t}(),c=function(){function t(){}return t.prototype.setApiBase=function(t){this._apiBase=t},t.prototype.getApiBase=function(){return this._apiBase},t.prototype.setWsUrl=function(t){this._wsUrl=t},t.prototype.getWsUrl=function(){return this._wsUrl},t.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[]},t.ngInjectableDef=e.defineInjectable({factory:function(){return new t},token:t,providedIn:"root"}),t}(),u=function(){function t(t,e){this.httpClient=t,this.configService=e}return t.prototype.loadBaseConfig=function(){var r=this;return new Promise(function(e,t){r.httpClient.get("./assets/json/config.json").subscribe(function(t){r.configService.setApiBase(t.apiBase),r.configService.setWsUrl(t.wsUrl),e(t)},function(t){e(null)})})},t.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:r.HttpClient},{type:c}]},t.ngInjectableDef=e.defineInjectable({factory:function(){return new t(e.inject(r.HttpClient),e.inject(c))},token:t,providedIn:"root"}),t}(),p=function(t,e){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function f(e,s,a,c){return new(a||(a=Promise))(function(t,r){function n(t){try{i(c.next(t))}catch(e){r(e)}}function o(t){try{i(c["throw"](t))}catch(e){r(e)}}function i(e){e.done?t(e.value):new a(function(t){t(e.value)}).then(n,o)}i((c=c.apply(e,s||[])).next())})}function l(n,o){var i,s,a,t,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:e(0),"throw":e(1),"return":e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function r(t){if(i)throw new TypeError("Generator is already executing.");for(;c;)try{if(i=1,s&&(a=2&t[0]?s["return"]:t[0]?s["throw"]||((a=s["return"])&&a.call(s),0):s.next)&&!(a=a.call(s,t[1])).done)return a;switch(s=0,a&&(t=[2&t[0],a.value]),t[0]){case 0:case 1:a=t;break;case 4:return c.label++,{value:t[1],done:!1};case 5:c.label++,s=t[1],t=[0];continue;case 7:t=c.ops.pop(),c.trys.pop();continue;default:if(!(a=0<(a=c.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){c=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){c.label=t[1];break}if(6===t[0]&&c.label<a[1]){c.label=a[1],a=t;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(t);break}a[2]&&c.ops.pop(),c.trys.pop();continue}t=o.call(n,c)}catch(e){t=[6,e],s=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([e,t])}}}var h=function(){function t(t,e,r,n,o){this.loadingCtrl=t,this.toastCtrl=e,this.platform=r,this.alertCtrl=n,this.storage=o}return t.prototype.setHost=function(t){this.storage.set("Host",t)},t.prototype.getHost=function(){return this.storage.get("Host")},t.prototype.setCurrentMember=function(t){this.storage.set("currentMember",JSON.stringify(t))},t.prototype.getCurrentMember=function(){return this.storage.get("currentMember")},t.prototype.setMenus=function(t){this.storage.set("menus",JSON.stringify(t))},t.prototype.getMenus=function(){return this.storage.get("menus")},t.prototype.setCurrentPassword=function(t){this.storage.set("currentPassword",JSON.stringify(t))},t.prototype.getCurrentPassword=function(){return this.storage.get("currentPassword")},t.prototype.isNull=function(t){return""==t||null==t||t==undefined||"[]"==t||t==[]||"function String() { [native code] }"==t},t.prototype.fail=function(t){return 0==t.code},t.prototype.hasNode=function(t,e){for(var r=0;r<t.length;r++)if(e==t[r].ID)return!0;return!1},t.prototype.hasObj=function(t,e){for(var r=0;r<t.length;r++)if(t[r].ID==e.ID)return!0;return!1},t.prototype.loading=function(r){return f(this,void 0,void 0,function(){var e;return l(this,function(t){switch(t.label){case 0:return e={content:r,showBackdrop:!0},[4,this.loadingCtrl.create(e)];case 1:return[4,t.sent().present()];case 2:return[2,t.sent()]}})})},t.prototype.alert=function(e,r){return void 0===r&&(r=""),f(this,void 0,void 0,function(){return l(this,function(t){switch(t.label){case 0:return[4,this.alertCtrl.create({header:e,subHeader:r,buttons:["确定"]})];case 1:return[4,t.sent().present()];case 2:return t.sent(),[2]}})})},t.prototype.confirm=function(t,e,r,n){return void 0===r&&(r=function(){}),void 0===n&&(n=""),this.alertCtrl.create({header:t,message:n,buttons:[{text:"取消",role:"cancel",handler:function(){r()}},{text:"确定",handler:function(){e()}}]})},t.prototype.toast=function(e,r){return void 0===r&&(r=1e3),f(this,void 0,void 0,function(){return l(this,function(t){switch(t.label){case 0:return[4,this.toastCtrl.create({message:e,duration:r})];case 1:return t.sent().present(),[2]}})})},t.prototype.writeEpc=function(t){(this.platform.is("ios")||this.platform.is("ipad")||this.platform.is("iphone"))&&window.webkit.messageHandlers.scan.postMessage(),this.platform.is("android")&&window.CNative.writeEpc(t)},t.prototype.scanc=function(t,e){(this.platform.is("ios")||this.platform.is("ipad")||this.platform.is("iphone"))&&window.webkit.messageHandlers.scan.postMessage(),this.platform.is("android")&&window.CNative.scan(t,e)},t.prototype.scan=function(t){(this.platform.is("ios")||this.platform.is("ipad")||this.platform.is("iphone"))&&window.webkit.messageHandlers.scan.postMessage(),this.platform.is("android")&&window.CNative.scan(t)},t.prototype.getTid=function(){if((this.platform.is("ios")||this.platform.is("ipad")||this.platform.is("iphone"))&&window.webkit.messageHandlers.getTid.postMessage(),this.platform.is("android"))return window.CNative.getTid()},t.prototype.getEpcs=function(){if((this.platform.is("ios")||this.platform.is("ipad")||this.platform.is("iphone"))&&window.webkit.messageHandlers.getEpcs.postMessage(),this.platform.is("android"))return window.CNative.getEpcs()},t.prototype.startRead=function(t){if((this.platform.is("ios")||this.platform.is("ipad")||this.platform.is("iphone"))&&window.webkit.messageHandlers.startRead.postMessage(),this.platform.is("android"))return window.CNative.startRead(t)},t.prototype.setPower=function(t){if((this.platform.is("ios")||this.platform.is("ipad")||this.platform.is("iphone"))&&window.webkit.messageHandlers.setPower.postMessage(),this.platform.is("android"))return window.CNative.setPower(t)},t.prototype.transDate=function(t){var e=new Date(t),r=e.getDate(),n=e.getMonth(),o=e.getFullYear();e.getMinutes(),e.getHours(),e.getSeconds();return o+"-"+(n+1)+"-"+r},t.prototype.getNow=function(){var t=new Date,e=t.getDate(),r=t.getMonth(),n=t.getFullYear(),o=t.getMinutes();return n+"-"+(r+1)+"-"+e+" "+t.getHours()+":"+o+":"+t.getSeconds()},t.prototype.getNowDate=function(){var t=new Date,e=t.getDate(),r=t.getMonth()+1,n=t.getFullYear();if(r<10)var o=n+"-0"+r+"-"+e;else o=n+"-"+r+"-"+e;return o},t.prototype.getLastYearDate=function(){var t=new Date,e=t.getDate(),r=t.getMonth()+1,n=t.getFullYear()-1;if(r<10)var o=n+"-0"+r+"-"+e;else o=n+"-"+r+"-"+e;return o},t.prototype.isScanSubmit=function(t){return"btn_submit"==t},t.prototype.isScanCancel=function(t){return"btn_cancel"==t},t.prototype.isScanCode=function(t){return"btn_submit"!=t&&"btn_cancel"!=t&&"btn_increase_power"!=t&&"btn_reduced_power"!=t},t.prototype.isNextPage=function(t){return"btn_next_page"==t},t.prototype.isScanAdd=function(t){return"btn_add"==t},t.prototype.isIncreasePower=function(t){return"btn_increase_power"==t},t.prototype.isReducedPower=function(t){return"btn_reduced_power"==t},t.prototype.scrollTo=function(t,e){var r=document.getElementById(t).offsetTop;e.scrollTo(0,r,300)},t.prototype.setHostToStorage=function(t){localStorage.setItem("hostUrl",t)},t.prototype.getHostByStorage=function(){return localStorage.getItem("hostUrl")||""},t.prototype.validateDomain=function(t){return/[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(\.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+\.?/.test(t)},t.prototype.validateIp4=function(t){return/^((25[0-5]|2[0-4]\d|[01]?\d\d?)($|(?!\.$)\.)){4}$/.test(t)},t.prototype.getDictName=function(t,e){for(var r=0;r<e.length;r++)if(t==e[r].ID)return e[r].name},t.prototype.changePower=function(n,o){var i=this,s=15;this.storage.get(o+"Power").then(function(t){i.isNull(t)||(s=t),i.isIncreasePower(n)&&(20<s?i.toast("功率已设定到最大值"):s+=5),i.isReducedPower(n)&&(s<15?i.toast("功率已设定到最小值"):s-=5);for(var e=[{power:10,msg:"当前为小功率"},{power:15,msg:"当前为中功率"},{power:20,msg:"当前为大功率"},{power:25,msg:"当前为特大功率"}],r=0;r<e.length;r++)s==e[r].power&&i.toast(e[r].msg);i.setPower(s),i.storage.set(o+"Power",s)})},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:n.LoadingController},{type:n.ToastController},{type:n.Platform},{type:n.AlertController},{type:o.Storage}]},t}(),d={apiBase:"http://bank.532t.com"},g=function(){function t(t,e,r){this.http=t,this.cCore=e,this.configService=r}return t.prototype["new"]=function(){return f(this,void 0,void 0,function(){var r,o,i,s,a,c;return l(this,function(t){switch(t.label){case 0:return[4,this.list({id:"-1"})];case 1:i=t.sent();try{for(s=function n(t){var e="function"==typeof Symbol&&t[Symbol.iterator],r=0;return e?e.call(t):{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}}(Object.keys(i.data)),a=s.next();!a.done;a=s.next())-1!=(c=a.value).indexOf("ID")&&(i.data[c]=i.data[c]||"")}catch(e){r={error:e}}finally{try{a&&!a.done&&(o=s["return"])&&o.call(s)}finally{if(r)throw r.error}}return[2,i]}})})},t.prototype.getWsUrl=function(){return"ws://"+(localStorage.getItem("hostUrl")||d.apiBase).replace("http://","")+":8089/android"},t.prototype.page=function(t){return this.post(this.getPathByEntityName()+"/page",t)},t.prototype.save=function(t){return this.post(this.getPathByEntityName()+"/save",t)},t.prototype.get=function(t){return this.post(this.getPathByEntityName()+"/get",{id:t})},t.prototype.getBy=function(t){return this.post(this.getPathByEntityName()+"/getby",t)},t.prototype.list=function(t){return this.post(this.getPathByEntityName()+"/list",t)},t.prototype["delete"]=function(t){return this.post(this.getPathByEntityName()+"/delete",{id:t})},t.prototype.has=function(t){return this.post(this.getPathByEntityName()+"/has",t)},t.prototype.sum=function(t){return this.post(this.getPathByEntityName()+"/sum",t)},t.prototype.count=function(t){return this.post(this.getPathByEntityName()+"/count",t)},t.prototype.getPathByEntityName=function(){return this.getEntityName().toLowerCase()},t.prototype.getEntityName=function(){return this.constructor.name.replace("Manager","")},t.prototype.post=function(t,e,r){var n=this;return void 0===r&&(r=!1),t=this.configService.getApiBase()+"/service/"+t,this.http.post(t,e,{withCredentials:!0}).toPromise().then(function(t){return t})["catch"](function(t){switch(t.status){case 400:n.cCore.toast("请求参数错误！");break;case 401:n.cCore.toast("您没有权限！");break;case 403:n.cCore.toast("服务器禁止访问！");break;case 404:n.cCore.toast("相关资源找不到！");break;case 500:n.cCore.toast("服务器出错啦！");break;case 503:n.cCore.toast("服务器离家出走啦！")}})},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:r.HttpClient},{type:h},{type:c}]},t}(),y=function(o){function t(t,e,r){var n=o.call(this,t,e,r)||this;return n.http=t,n.cCore=e,n.configService=r,n}return function n(t,e){function r(){this.constructor=t}p(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(t,o),t.prototype.login=function(t,e){return this.post("member/login",{username:t,password:e},!0)},t.prototype.getCurrentMember=function(){return this.post("member/getCurrentMember",{})},t.prototype.getMyDepartmentMembers=function(t){return this.post("member/getmydepartmentmembers",{code:t})},t.prototype.changePassword=function(t){return this.post("member/changePassword",t)},t.prototype.getBy=function(t){return this.post("member/getby",t)},t.prototype.quickLogin=function(t){return this.post("member/quicklogin",{code:t})},t.prototype.getMyupDepartment=function(t){return this.post("member/getmyupdepartment",{memberID:t})},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:r.HttpClient},{type:h},{type:c}]},t}(g);t.CoreService=i,t.CoreComponent=s,t.CoreModule=a,t.StartupService=u,t.ConfigService=c,t.environment=d,t.BaseManager=g,t.CCore=h,t.MemberManager=y,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=core.umd.min.js.map